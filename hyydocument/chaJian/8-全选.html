<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<style>
ul { padding:0; margin:0; width:300px; padding:1px; border:1px solid #333; }
li { list-style:none; line-height:35px; border-bottom:1px solid #ccc; }

</style>
</head>

<body>

<ul>
	<li><input type="checkbox" /> JS</li>
	<li><input type="checkbox" /> CSS</li>
	<li><input type="checkbox" /> HTML</li>
	<li><input type="checkbox" /> ajax</li>
	<li><input type="checkbox" /> 正则</li>
	<li><input type="checkbox" /> jQuery</li>
</ul>
<p><input type="checkbox" /> 全选</p>

<script>
var oUl = document.getElementsByTagName('ul')[0];
var aLi = oUl.getElementsByTagName('li');
var aInp = oUl.getElementsByTagName('input');
var allInp = document.getElementsByTagName('p')[0].getElementsByTagName('input')[0];

var arr = ['#fff0da', '#f6ffab'];

var num = 0;		// 计数

for (var i=0; i<aLi.length; i++) {
	
	aLi[i].index = i;
	
	aLi[i].style.background = arr[i%arr.length];
	
	aLi[i].onmouseover = function () {
		this.style.background = '#a1a1a1';
	};
	aLi[i].onmouseout = function () {
		if ( aInp[this.index].checked  ) {
			this.style.background = '#a1a1a1';
		}
		else {
			this.style.background = arr[this.index%arr.length];
		}
	};
	
	
	
	aInp[i].onclick = function () {
		if ( this.checked ) {
			num ++;
		}
		else {
			num --;
		}
		
		document.title = num;
		
		if ( num == aInp.length ) {
			allInp.checked = true;
		}
		else {
			allInp.checked = false;
		}
	};
}

// 全选
allInp.onclick = function () {
	for (var i=0; i<aInp.length; i++) {
		aInp[i].checked = allInp.checked;
	}
	
	for (var i=0; i<aInp.length; i++) {
		if (allInp.checked) {
			aLi[i].style.background = '#a1a1a1';
			num = aLi.length;		// 数字同步
		}
		else {
			aLi[i].style.background = arr[i%arr.length];
			num = 0;						// 数字同步
		}
	}
};


</script>

</body>
</html>
